<!DOCTYPE html>
<html>
<head>
    <title>Kitchen Orders</title>
    <style>
        body {
            font-family: Arial;
            background: #111;
            color: white;
            padding: 20px;
        }

        .order-card {
            background: #222;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 5px solid orange;
        }

        button {
            padding: 6px 12px;
            margin-top: 10px;
            cursor: pointer;
            border: none;
        }

        .prepare { background: orange; color: black; }
        .ready { background: green; color: white; }
    </style>
</head>
<body>

<h1>ðŸ”¥ Kitchen Orders</h1>
<div id="orders"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, onValue, update } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBbAPaV1M2c43QFQKSgMjes8jFuEN3ZTDs",
  authDomain: "ara-cafe.firebaseapp.com",
  databaseURL: "https://ara-cafe-default-rtdb.firebaseio.com/",
  projectId: "ara-cafe",
  storageBucket: "ara-cafe.firebasestorage.app",
  messagingSenderId: "1061813484998",
  appId: "1:1061813484998:web:cef94e2ed6c9e178c346c7"
};

const app = initializeApp(firebaseConfig);
const database = getDatabase(app);

const ordersRef = ref(database, "orders");
const ordersDiv = document.getElementById("orders");

onValue(ordersRef, (snapshot) => {
    ordersDiv.innerHTML = "";

    snapshot.forEach((childSnapshot) => {
        const order = childSnapshot.val();
        const orderId = childSnapshot.key;

        const div = document.createElement("div");
        div.classList.add("order-card");

        let itemsList = "";
        order.items.forEach(item => {
            itemsList += `<li>${item.name} x${item.quantity}</li>`;
        });

        div.innerHTML = `
            <h3>${order.table}</h3>
            <ul>${itemsList}</ul>
            <p>Total: â‚¹${order.total}</p>
            <p>Status: <strong>${order.status}</strong></p>
            <button class="prepare" onclick="updateStatus('${orderId}', 'Preparing')">Preparing</button>
            <button class="ready" onclick="updateStatus('${orderId}', 'Ready')">Ready</button>
        `;

        ordersDiv.appendChild(div);
    });
});

window.updateStatus = function(orderId, newStatus) {
    update(ref(database, "orders/" + orderId), {
        status: newStatus
    });
};
</script>

</body>
</html>